function confirm() {
    read -p "Are you sure? " -n 1 -r
    echo;
    if [[ $REPLY =~ ^[Yy]$ ]]
    then
        return 0
    else 
        return 1
    fi
}

function _install_deps() {
  echo Installing dependencies
  brew install fzf nano gcc moreutils tmux tflint gh rbenv pyenv spaceship polyglot zsh pyenv poetry pipx tfenv nvm awscli lazydocker docker docker-completion docker-buildx neovim tflint kubectl aws-sam-cli terraform-docs go-task pipx pnpm glow ctags vale aws-vault ripgrep fd goenv rustup
  if [[ "$WSL_DISTRO_NAME" == "Ubuntu" ]];then
    . /etc/os-release
    # Starting from Ubuntu 22.04 LTS, Ubuntu on WSL no longer bundled with wslu. Please install the PPA version.
    if [[ "$VERSION_ID" == "22.04" ]];then
      sudo apt install ubuntu-wsl -y
      sudo add-apt-repository ppa:wslutilities/wslu -y
      sudo apt update
      sudo apt install wslu -y
    fi

  elif [[ "$WSL_DISTRO_NAME" == "Debian" ]];then
    sudo apt install gnupg2 apt-transport-https -y
    wget -O - https://pkg.wslutiliti.es/public.key | sudo tee /etc/apt/trusted.gpg.d/wslu.asc
    echo "deb https://pkg.wslutiliti.es/debian $(. /etc/os-release && echo "$VERSION_CODENAME") main" | sudo tee /etc/apt/sources.list.d/wslu.list
    sudo apt update
    sudo apt install wslu -y
  fi
}

function _install_cspell() {
  echo Installing cspell
  npm install -g cspell
  if [ -L ~/.local/bin/cspell ];then
    rm -f ~/.local/bin/cspell
  fi
  ln -s $(which cspell) ~/.local/bin/cspell
}

function _install_aws_azure_login() {
  echo Installing aws-azure-login
  npm install -g aws-azure-login
  if [ -L ~/.local/bin/aws-azure-login ];then
    rm -f ~/.local/bin/aws-azure-login
  fi
  ln -s $(which aws-azure-login) ~/.local/bin/aws-azure-login
}

function _install_alacrity_support() {
  echo Installing Alacritty
  wget -q https://github.com/alacritty/alacritty/releases/download/$ALACRITTY_VERSION/alacritty.bash -O ~/.local/share/bash-completion/alacritty.bash
  curl -s https://github.com/alacritty/alacritty/releases/download/$ALACRITTY_VERSION/alacritty.info | sudo tic -xe alacritty,alacritty-direct -
  infocmp alacritty 2>&1 >/dev/null
}


function _configure_nvim() {
  echo Configuring Vim
  hash -r
  if ! type nvim; then
    echo "Neovim not installed"
    return
  fi

  neovim +PlugInstall +qall
}

function _start_ssh_agent() {
  echo startup ssh agent
  /usr/bin/ssh-agent -s > ~/.agent;

}

function _configure_locale() {
  echo Generating locale
  bash -c 'sudo locale-gen $LANG'
}


function _install_nvshim() {
  pipx install git+https://github.com/iamogbz/nvshim.git
}

function _install_tmux_completions() {
  wget -O ~/.local/share/bash-completion/tmux.bash https://raw.githubusercontent.com/imomaliev/tmux-bash-completion/master/completions/tmux
}


function _install_adr_tools() {
  if [[ ! -e ~/.local/src/adr-tools ]]; then
    git clone https://github.com/npryce/adr-tools.git \
      ~/.local/src/adr-tools
  fi
  git -C ~/.local/src/adr-tools pull
}


# Not in the install.sh
function _install_krew_df_pv() {
  curl https://krew.sh/df-pv | bash
}

